{"componentChunkName":"component---src-templates-blog-post-js","path":"/Trouble shooting/next-배포중-replaceAll-is-not-a-function-에러/","result":{"data":{"site":{"siteMetadata":{"title":"Wook.log","author":"[Wookchang Lee]","siteUrl":"https://wook95.github.io","comment":{"disqusShortName":"","utterances":"wook95/wook95.github.io"},"sponsor":{"buyMeACoffeeId":"wook95"}}},"markdownRemark":{"id":"b784b5f3-2bce-5b43-ae6a-8352bd30c4a2","excerpt":"문제 vercel로도 netlify로도 어떻게 배포를 해도 자꾸 에러가 발생했다. 에크마 스크립트 2022 명세를 보면 2021년, es12에 추가된 메소드로 을 소개하고 있다. 추가된지 얼마 되지 않은 메소드여서, 폴리필을 추가해주지 않아 문제가 생겼다. 해결 다른 메소드를 통해 해결한다. 정규표현식과 replace 메소드를 통해 replaceAll 기능을 구현한다. core-js를 이용한 폴리필  .babelrc에서 preset-env 프리셋을 사용한 폴리필","html":"<h3 id=\"문제\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C\" aria-label=\"문제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제</h3>\n<br>\n로컬에선 잘 되던 replaceAll . . .\n<p>vercel로도 netlify로도 어떻게 배포를 해도 자꾸 에러가 발생했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token punctuation\">[</span><span class=\"token constant\">GET</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span>_next<span class=\"token operator\">/</span>data<span class=\"token operator\">/</span><span class=\"token operator\">-</span>CYXDZ_c1lqEurL4uFptp<span class=\"token operator\">/</span>index<span class=\"token punctuation\">.</span>json\n<span class=\"token number\">03</span><span class=\"token operator\">:</span><span class=\"token number\">15</span><span class=\"token operator\">:</span><span class=\"token number\">11</span><span class=\"token operator\">:</span><span class=\"token number\">00</span>\n<span class=\"token constant\">FUNCTION_RATE_LIMIT</span><span class=\"token operator\">:</span> This Serverless Function was rate limited</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">02</span><span class=\"token operator\">-</span><span class=\"token number\">15</span>T18<span class=\"token operator\">:</span><span class=\"token number\">15</span><span class=\"token operator\">:</span><span class=\"token number\">18.279</span>Z ebaa2d25<span class=\"token operator\">-</span>b874<span class=\"token operator\">-</span><span class=\"token number\">48</span>ef<span class=\"token operator\">-</span>a207<span class=\"token operator\">-</span>b53b9ea56163 <span class=\"token constant\">ERROR</span> TypeError<span class=\"token operator\">:</span> strings<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>replaceAll is not a <span class=\"token keyword\">function</span>\n    at <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>task<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>next<span class=\"token operator\">/</span>server<span class=\"token operator\">/</span>pages<span class=\"token operator\">/</span>items<span class=\"token operator\">/</span><span class=\"token punctuation\">[</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>js<span class=\"token operator\">:</span><span class=\"token number\">186</span><span class=\"token operator\">:</span><span class=\"token number\">24</span>\n    at Array<span class=\"token punctuation\">.</span><span class=\"token function\">map</span> <span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>anonymous</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">)\n    at ItemDetail (/var/task/.next/server/pages/items/[id].js:184:7)\n    at d (/var/task/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:33:498)\n    at bb (/var/task/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:36:16)\n    at a.b.render (/var/task/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:42:43)\n    at a.b.read (/var/task/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:41:83)\n    at Object.exports.renderToString (/var/task/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:52:138)\n    at Object.renderPage (/var/task/node_modules/next/dist/server/render.js:736:46)\n    at Object.defaultGetInitialProps (/var/task/node_modules/next/dist/server/render.js:368:51) </span><span class=\"token punctuation\">{</span>\n  page<span class=\"token operator\">:</span> <span class=\"token string\">'/items/[id]'</span>\n<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\nRequestId: ebaa2d25-b874-48ef-a207-b53b9ea56163 Error: Runtime exited with error: exit status 1\nRuntime.ExitError</span></code></pre></div>\n<br>\n<p><a href=\"https://tc39.es/ecma262/multipage/#sec-intro\">에크마 스크립트 2022 명세</a>를 보면 2021년, es12에 추가된 메소드로 <code class=\"language-text\">replaceAll</code>을 소개하고 있다. 추가된지 얼마 되지 않은 메소드여서, 폴리필을 추가해주지 않아 문제가 생겼다.</p>\n<br>\n<h3 id=\"해결\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0\" aria-label=\"해결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>해결</h3>\n<ol>\n<li>\n<p>다른 메소드를 통해 해결한다.</p>\n<p>정규표현식과 replace 메소드를 통해 replaceAll 기능을 구현한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">replaceAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'-'</span><span class=\"token punctuation\">,</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">-</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>\n<p>core-js를 이용한 폴리필</p>\n<p><code class=\"language-text\">import 'core-js/features/string/replace-all'</code></p>\n</li>\n<li>.babelrc에서 preset-env 프리셋을 사용한 폴리필</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"presets\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">\"next/babel\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"@babel/preset-env\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"targets\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"> 0.25%, not dead\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//시장 점유율25%이상의, 지원이 끊기지 않은 브라우져</span>\n          <span class=\"token property\">\"useBuiltIns\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"entry\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"corejs\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"proposals\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","frontmatter":{"title":"next 배포중 replaceAll is not a function 에러","date":"February 16, 2022"}}},"pageContext":{"slug":"/Trouble shooting/next-배포중-replaceAll-is-not-a-function-에러/","previous":{"fields":{"slug":"/Retrospective/개발-공부-2021년-회고/"},"frontmatter":{"title":"개발 공부 2021년 회고"}},"next":{"fields":{"slug":"/Javascript/실행-컨텍스트란-뭘까/"},"frontmatter":{"title":"실행 컨텍스트란 뭘까"}}}},"staticQueryHashes":["2486386679","3128451518"]}