{"componentChunkName":"component---src-templates-blog-post-js","path":"/Javascript/addeventlistner에-파라미터가-있는-콜백함수-넘기기!-(재사용-가능))/","result":{"data":{"site":{"siteMetadata":{"title":"Wook.log","author":"[Wookchang Lee]","siteUrl":"https://wook95.github.io","comment":{"disqusShortName":"","utterances":"wook95/wook95.github.io"},"sponsor":{"buyMeACoffeeId":"wook95"}}},"markdownRemark":{"id":"38ec9d05-c4af-50f2-ad39-ad937bc01a33","excerpt":"TL; DR 이벤트 핸들러를 익명함수로 감싸주고 리턴하는 덩어리를 이벤트핸들러로!\n\n 겪었던 문제 스타벅스 홈페이지를 바닐라 자바스크립트로 클론하면서 기능을 이것 저것 추가해봤습니다.\n하트 버튼을 누르면 색이 채워지고, 다시 누르면 없어지는 기능을 여기 저기 온갖 곳에 구현해보려고 했는데,,, 똑같은걸 여기 저기 쓰는게 맘에 걸려서 공부해봤습니다. addEventListener…","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 628px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACLklEQVQoz41S3UtTcRg+f0N3URTZp4kQ2oWXQREUhBTFBMuVGfRFJdnMTc92nDH02FHPl+EyW0WYUZb24Vpua1kimWfNBkVd1mxuOwlBt0/v+c1khBddPDy8z/v8fr9z3vfhpOlnaHwvwftBhcdQIBAYx5fBYv9fvY3OOqa7EIi/AafGhxHMSIjlNMRMFa9yKiYWNMbRrLLE4XmFPCpDJKMw/O1PmBpG5iT0GWFwsvEID1NdCKZJ/CbjSUrG0FeJWMHztIqncyrj2C8do997GMYXdITp0WBWo1phZ++nuuGfoQvVxGOMmRKkSAd2O5tw4EozttidOB8QEDZlhDIyBj9LqNVasLPJjco2N/retaP+divjt791hNIy/Ml23PwYA1fT40fFBQfKTgpYfdCFjUcErDnkxPqqeuxweLDLyaPiHI8Vex0oquaxsrIB62yNWFvFo+wUj30Cjz28F0U1l3Cm9xa47XVebLLz2EYXlp8WiFuxav9FlNa5sPW4B8XHmlF6QsBmOz122IUN1ZdRftaH4qMulFC/pLaFPPQRtgbY3Do4X/Qerid8uJu8ijvJTgzERWiTIvtNqx78lNdvGCKuTYnonxExYHQwXyAhYugL+WY7ocd96Dei4PTZEYxmuvEyp+MFDTlE2x7/SQPPaKy2Bs90M69bHCKv5bNg+cJmLx78oKUYEXCKMYyxeYpNNh+PaEEkCrEUlUIs9l5TdFhsrC0XBnvZMP8HCoP9B5QmO89Ny2YBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"addEventListesr123\"\n        title=\"addEventListesr123\"\n        src=\"/static/e1835a60df6cd233009a9fe08942339c/3d84d/addEventListesr123.png\"\n        srcset=\"/static/e1835a60df6cd233009a9fe08942339c/5a46d/addEventListesr123.png 300w,\n/static/e1835a60df6cd233009a9fe08942339c/0a47e/addEventListesr123.png 600w,\n/static/e1835a60df6cd233009a9fe08942339c/3d84d/addEventListesr123.png 628w\"\n        sizes=\"(max-width: 628px) 100vw, 628px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h3 id=\"tl-dr\" style=\"position:relative;\"><a href=\"#tl-dr\" aria-label=\"tl dr permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TL; DR</h3>\n<ul>\n<li>이벤트 핸들러를 익명함수로 감싸주고 리턴하는 덩어리를 이벤트핸들러로!\n<br>\n<br></li>\n</ul>\n<h3 id=\"겪었던-문제\" style=\"position:relative;\"><a href=\"#%EA%B2%AA%EC%97%88%EB%8D%98-%EB%AC%B8%EC%A0%9C\" aria-label=\"겪었던 문제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>겪었던 문제</h3>\n<p>스타벅스 홈페이지를 바닐라 자바스크립트로 클론하면서 기능을 이것 저것 추가해봤습니다.\n하트 버튼을 누르면 색이 채워지고, 다시 누르면 없어지는 기능을 여기 저기 온갖 곳에 구현해보려고 했는데,,, 똑같은걸 여기 저기 쓰는게 맘에 걸려서 공부해봤습니다.</p>\n<br>\n<h3 id=\"addeventlistener\" style=\"position:relative;\"><a href=\"#addeventlistener\" aria-label=\"addeventlistener permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>addEventListener</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">(</span>이벤트_걸고싶은_타겟<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'이벤트타입'</span><span class=\"token punctuation\">,</span>콜백함수<span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span>캡처사용여부<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>오늘 궁금했던것은 바로 저 콜백함수! 다른 이름으론 이벤트 핸들러!<br>\n이벤트 리스너의 콜백함수의 제어권은 이벤트 리스너가 갖기 때문에<br>\n자기 멋대로 콜백함수의 첫번째 인수는 무족권 이벤트 객체를 주입해버립니다. 그렇게 설계 되었습니다!<br>\n그래서 파라미터에 무엇을 넣어도 이벤트객체만 나오는 것이지요..!</p>\n<br>\n<p>제가 하고 싶었던 것은 <code class=\"language-text\">타깃.addEventListener('click',handleHeart(타깃))</code> 입니다.<br>\n같은 기능을 하는 이벤트 핸들러 함수 하나만 만들고 타깃만 쓱 싹 바꿔가면서 이벤트 등록해주기 ! ! ! !\n<br>\n<br></p>\n<h3 id=\"해결\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0\" aria-label=\"해결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>해결</h3>\n<p>원래 쓰려고 했던 이벤트 핸들러를 함수로 감싸주고, 반환해줬습니다.<br><br></p>\n<p>|이벤트 핸들러</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> <span class=\"token function-variable function\">handleHeart</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">heart</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>heart<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">===</span><span class=\"token string\">'empty'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n      heart<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'empty'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'solid'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>heart<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">===</span><span class=\"token string\">'solid'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n      heart<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'solid'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'empty'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> \n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>|이벤트 등록</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  <span class=\"token keyword\">let</span> likes <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.content-box__review--like'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> heart <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.header--like'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>firstElementChild<span class=\"token punctuation\">;</span>\n\n  heart<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span><span class=\"token function\">handleHeart</span><span class=\"token punctuation\">(</span>heart<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>likes<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">el</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n    el<span class=\"token punctuation\">.</span>firstChild<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span><span class=\"token function\">handleHeart</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">.</span>firstChild<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </code></pre></div>\n<br>\nhandleHeart 함수는 익명함수를 반환합니다! \n이 리턴되는 익명함수야말로 이벤트 리스너가 좌지우지 할 수 있는 함수가 됩니다.<br>\n(리턴되는 익명함수의 파라미터에 인수로 e를 넣어주고 출력해보면 이벤트 객체가 나옵니다!)\n<p>그렇기에 handleHeart 함수의 인수 heart는 (생명주기가 끝나도 쓸수 있는 변수)클로저 덕분에 이벤트 객체가 아닌 heart가 될 수 있습니다!\n<br><br></p>","frontmatter":{"title":"addEventListener에 파라미터가 있는 콜백함수 넘기기! (재사용 가능)","date":"September 01, 2021"}}},"pageContext":{"slug":"/Javascript/addeventlistner에-파라미터가-있는-콜백함수-넘기기!-(재사용-가능))/","previous":{"fields":{"slug":"/git/깃허브-저도-한번-써보겠습니다🐱🐙/"},"frontmatter":{"title":"깃허브 저도 한번 써보겠습니다🐱🐙"}},"next":{"fields":{"slug":"/Javascript/자바스크립트와-비동기!/"},"frontmatter":{"title":"자바스크립트와 비동기!"}}}},"staticQueryHashes":["2486386679","3128451518"]}